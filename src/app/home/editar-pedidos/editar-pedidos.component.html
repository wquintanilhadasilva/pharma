<div>
    <div class="row text-center text-primary">
        <div class="col-12">
            <h4>Editar Pedido</h4>
        </div>
    </div>
    <div  class="box">
        <div >
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                        <div class="row text-center">
                            <div class="col-12">
                                <h5 class="text-center text-primary">
                                    <small>Dados Globais</small>
                                </h5>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-4">
                                <h6><small>
                                    Referência
                                    <br/>
                                    {{faturamentoService.obtemReferenciaAtual()}}
                                </small></h6>
                            </div>
                            <div class="col-4">
                                <h6><small>
                                    Fat. Global
                                    <br/>
                                    {{faturamentoService.obtemFaturamentoTotal() | currency:'BRL':true:'3.2'}}
                                </small></h6>
                            </div>
                            <div class="col-4">
                                <h6><small>
                                    Margem Global
                                    <br/>
                                    <mark>{{faturamentoService.obtemMargemGlobal() | number:'1.2'}}</mark>
                                </small></h6>
                            </div>
                        </div>
                        <hr>
                        <div class="row text-center">
                            <div class="col-12">
                                <h5 class="text-center text-primary">
                                    <small>Dados do Pedido: {{pedido.number}}</small>
                                </h5>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-9 text-left">
                                <h6><small>
                                    Cliente
                                    <br/>
                                    {{pedido.customer}}
                                </small></h6>
                            </div>
                            <div class="col-3">
                                <h6><small>
                                    Total
                                    <br/>
                                    {{pedido.totalOrder | currency:'BRL':true:'3.2'}}
                                </small></h6>
                            </div>
                            <div class="col-9 text-left">
                                <h6><small>
                                    Vendedor
                                    <br/>
                                    <mark>NOME DO VENDEDOR</mark>
                                </small></h6>
                            </div>
                            <div class="col-3">
                                <h6><small>
                                    Margem %
                                    <br/>
                                    <mark>{{pedido.margin | number:'1.2'}}</mark>
                                </small></h6>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-12 text-center">
                                <button class="btn btn-outline-warning" (click)="voltar()"><i class="fa fa-chevron-left" aria-hidden="true"></i> Voltar</button>
                                <button class="btn btn-outline-primary" (click)="descartar()"><i class="fa fa-undo" aria-hidden="true"></i> Descartar</button>
                                <button class="btn btn-outline-success" (click)="gravar()"><i class="fa fa-floppy-o" aria-hidden="true"></i> Gravar</button>
                            </div>
                        </div>
                        <div class="row margin-top-20">
                            <div class="col-12">
                                <h4 class="text-center text-primary">
                                    <small>Itens do Pedido</small>
                                </h4>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row card card-block box">
                    <div class="ol-12 text-right">
                        <button (click)="novoItem()" class="btn btn-outline-primary">
                            <i class="fa fa-plus"></i> Novo item
                        </button>
                    </div>
                    <div class="col-12 div-scrool margin-top-10" style="font-size: smaller; padding: 13px;">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th class="text-center td-order-item">Detalhes do Item</th>
                                    <th class="text-center td-order-item-action">Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let p of pedido.itens">
                                    <td class="td-order-item">
                                        <div class="row">
                                            <div class="col-12 text-left">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <span style="font-weight: bold;">{{p.productName}}</span>
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="row">
                                                    <div class="col-6">
                                                        <span style="font-weight: bold;">Qtde: </span>{{p.quantidade | number:'1.2'}}
                                                    </div>
                                                    <div class="col-6">
                                                        <span style="font-weight: bold;">Preço de venda: </span>{{p.salesPrice |
                                                        currency:'BRL':true }}
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-6">
                                                        <span style="font-weight: bold;">Impostos: </span>{{p.tax | currency:'BRL':true
                                                        }}
                                                    </div>
                                                    <div class="col-6">
                                                        <span style="font-weight: bold;">Custo unitário: </span>{{p.productUnitCost
                                                        | currency:'BRL':true }}
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-6">
                                                        <span style="font-weight: bold;">Valor total: </span>{{p.totalItem | currency:'BRL':true }}
                                                    </div>
                                                    <div class="col-6">
                                                        <span style="font-weight: bold;">Margem: </span>
                                                        <mark>{{p.margin | number:'1.2'}}</mark>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="td-order-item-action text-center">
                                        <div class="row">
                                            <div class="col-12">
                                                <i class="fa fa-times fa-1x" (click)="itemSelecionado=p" style="padding: 10px;" data-toggle="modal" data-target="#modalExcluir"><br><span class="fontSmall">Excluir</span></i>
                                                <i class="fa fa-pencil fa-1x" (click)="editar(p)" style="padding: 10px;"><br><span class="fontSmall">Editar</span></i>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <app-editar-item-pedido #editarItem (editClose)="closeEditar($event)">
            </app-editar-item-pedido>
        </div>
    </div>

<!-- MODAL CONFIRM -->
<div class="modal fade" id="modalExcluir" tabindex="-1" role="dialog" aria-labelledby="titulo" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="titulo">
                    Remover item do pedido
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
            </div>
            <div class="modal-body">
                <p class="lead text-center">Tem certeza que deseja
                    <mark><strong class=" text-danger text-primary">Remover</strong></mark> esse item?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="itemSelecionado = null" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" (click)="remover(itemSelecionado);itemSelecionado = null;" data-dismiss="modal">Confirmar</button>
            </div>
        </div>
    </div>
</div>